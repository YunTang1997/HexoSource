---
title: 【闲疯帝】康威生命游戏的控制台简单实现
date: 2020-02-05 11:38:22
tags: Borring
categories: 闲疯帝
thumbnail: "https://hexoblog-1257022783.cos.ap-chengdu.myqcloud.com/LifeGame/Conways_game_of_life_breeder_animation.gif"
comments: 
toc: true
disqusId: ccyhweb
---

## 规则
---
生命游戏中，对于任意细胞，规则如下：
<!-- more -->
&emsp;每个细胞有两种状态 - 存活或死亡，每个细胞与以自身为中心的周围八格细胞产生互动（如图，黑色为存活，白色为死亡）
* 当前细胞为存活状态时，当周围的存活细胞低于2个时（不包含2个），该细胞变成死亡状态。（模拟生命数量稀少）
* 当前细胞为存活状态时，当周围有2个或3个存活细胞时，该细胞保持原样。
* 当前细胞为存活状态时，当周围有超过3个存活细胞时，该细胞变成死亡状态。（模拟生命数量过多）
*当前细胞为死亡状态时，当周围有3个存活细胞时，该细胞变成存活状态。（模拟繁殖）

可以把最初的细胞结构定义为种子，当所有在种子中的细胞同时被以上规则处理后，可以得到第一代细胞图。按规则继续处理当前的细胞图，可以得到下一代的细胞图，周而复始。`[From WikiPedia]`

---
## 简单实现
---
```c++
#include <iostream>
#include <vector>
#include <string>
#include <stdio.h>
#include <wchar.h>
#include <windows.h>
#define N 30
using namespace std;

/*
	康威生命游戏的c++简单实现
 */
vector<vector<char>> board(N,vector<char>(N,' '));

/*
	清屏函数：若使用system("cls")会出现闪屏，因为该函数太慢了	
	由于数据量不大这里采用移动光标实现屏幕部分涂改，也可采用双缓冲机制(自行google)
 */
void clearScreen(){    
    HANDLE hConsole = GetStdHandle(STD_OUTPUT_HANDLE);
    COORD coordScreen = { 0, 0 };
    SetConsoleCursorPosition( hConsole, coordScreen );
}


// 判断周围生命个数
int direct[8][2] = {{0,1},{0,-1},{1,0},{-1,0},{-1,1},{1,-1},{-1,-1},{1,1}};
int countLiveFunc(vector<vector<char>>& board,int x,int y) {
	int count = 0;
	int nx,ny;
	for(int k = 0;k < 8;k++)
	{
		nx = x + direct[k][0];
		ny = y + direct[k][1];
		if(nx>=0 && nx<N && ny>=0 && ny<N && board[nx][ny]=='X')
		{
			count++;
		}
	}
	return count;
}
// 刷新函数
void fresh(vector<vector<char>> &board){
	int n = board.size();
	vector<vector<char>> newBoard(board);
	for(int i = 0;i < n;i++)
	{
		for(int j = 0;j < n;j++)
		{
			if(board[i][j]=='X')
			{
				int countLive = countLiveFunc(board,i,j);
				if(countLive<2) newBoard[i][j]=' ';
				else if(countLive==2 || countLive==3) continue;
				else if(countLive>3) newBoard[i][j]=' ';
			}
			else
			{
				int countLive = countLiveFunc(board,i,j);
				if(countLive==3) newBoard[i][j]='X';
			}
		}
	}
	board = newBoard;
}

void printBoard(){
	while(true){
		cout << '\n';
		cout << "||============================================================||"<<endl;
		cout << "||                   ||   GAME OF LIFE  ||                    ||"<<endl; 
		cout << "||============================================================||"<<endl;
		for(auto i : board){
			cout << "||";
			for(auto j : i)
				printf("%c ",j);
			cout << "||";
			cout << endl;
		}
		cout << "||============================================================||"<<endl;
		cout << "||At each step in time, the following transitions occur:      ||"<<endl;
		cout << "||                                                            ||"<<endl;
		cout << "||1. Any live cell with fewer than two live neighbours dies,  ||"<<endl;
		cout << "||   as if by underpopulation.                                ||"<<endl;
		cout << "||2. Any live cell with two or three live neighbours lives on ||"<<endl;
		cout << "||   to the next generation.                                  ||"<<endl;
		cout << "||3. Any live cell with more than three live neighbours dies, ||"<<endl;
		cout << "||   as if by overpopulation.                                 ||"<<endl;
		cout << "||4. Any dead cell with exactly three live neighbours becomes ||"<<endl;
		cout << "||   a live cell, as if by reproduction.                      ||"<<endl;
		cout << "||============================================================||"<<endl;
		Sleep(200);
		clearScreen();
		fresh(board);
	}
}

int main()
{
	// 初始化：脉冲星
	board = {
		{' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','X','X','X',' ',' ',' ','X','X','X',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ','X',' ',' ',' ',' ','X',' ','X',' ',' ',' ',' ','X',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ','X',' ',' ',' ',' ','X',' ','X',' ',' ',' ',' ','X',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ','X',' ',' ',' ',' ','X',' ','X',' ',' ',' ',' ','X',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','X','X','X',' ',' ',' ','X','X','X',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','X','X','X',' ',' ',' ','X','X','X',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ','X',' ',' ',' ',' ','X',' ','X',' ',' ',' ',' ','X',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ','X',' ',' ',' ',' ','X',' ','X',' ',' ',' ',' ','X',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ','X',' ',' ',' ',' ','X',' ','X',' ',' ',' ',' ','X',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','X','X','X',' ',' ',' ','X','X','X',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',},
		{' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',}
	};
	// 执行打印函数
	printBoard();
	return 0;
}

```

---
## 效果预览
---

<center>
![脉冲星](https://hexoblog-1257022783.cos.ap-chengdu.myqcloud.com/LifeGame/LifeGame.gif)

</center>